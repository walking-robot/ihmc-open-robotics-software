<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Controller Core · IHMC Open Robotics Software</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="At the heart of the controller is a Quadratic Program (QP) that considers all objectives given to the controller (balancing, moving a hand, and others). This section gives an overview of the infrastructure surrounding the QP solver. Sometimes the robot will not be able to achieve all commands provided by the Managers. In that case the optimization makes sure they are achieved &quot;as good as possible&quot;. We prioritize objectives by assigning a weight to them that can be changed by the Managers depending on the current state of the robot."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Controller Core · IHMC Open Robotics Software"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ihmcrobotics.github.io/ihmc-open-robotics-software/index.html"/><meta property="og:description" content="At the heart of the controller is a Quadratic Program (QP) that considers all objectives given to the controller (balancing, moving a hand, and others). This section gives an overview of the infrastructure surrounding the QP solver. Sometimes the robot will not be able to achieve all commands provided by the Managers. In that case the optimization makes sure they are achieved &quot;as good as possible&quot;. We prioritize objectives by assigning a weight to them that can be changed by the Managers depending on the current state of the robot."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/ihmc-open-robotics-software/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script><link rel="stylesheet" href="/ihmc-open-robotics-software/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/ihmc-open-robotics-software/"><img class="logo" src="/ihmc-open-robotics-software/img/running-man-logo.png" alt="IHMC Open Robotics Software"/><h2 class="headerTitleWithLogo">IHMC Open Robotics Software</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://ihmcrobotics.github.io" target="_self">IHMC Home</a></li><li class=""><a href="https://ihmcrobotics.github.io/docs/docshome.html" target="_self">All IHMC Docs</a></li><li class=""><a href="http://robots.ihmc.us/" target="_self">About IHMC</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>IHMC Humanoid Controller</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">IHMC Humanoid Controller</h3><ul><li class="navListItem"><a class="navItem" href="/ihmc-open-robotics-software/docs/000-summary-control.html">Summary</a></li><li class="navListItem"><a class="navItem" href="/ihmc-open-robotics-software/docs/00-intro-control.html">Introduction</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/ihmc-open-robotics-software/docs/01-controllercore.html">Controller Core</a></li><li class="navListItem"><a class="navItem" href="/ihmc-open-robotics-software/docs/02-yovariables.html">Yo Variables</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Controller Core</h1></header><article><div><span><p>At the heart of the controller is a Quadratic Program (QP) that considers all objectives given to the controller (balancing, moving a hand, and others). This section gives an overview of the infrastructure surrounding the QP solver. Sometimes the robot will not be able to achieve all commands provided by the Managers. In that case the optimization makes sure they are achieved &quot;as good as possible&quot;. We prioritize objectives by assigning a weight to them that can be changed by the Managers depending on the current state of the robot.</p>
<p>Each Manager outputs InverseDynamicsCommands and FeedbackControlComands that can contain desired accelerations for points on the robot, a desired linear momentum rate for maintaining balance, desired joint accelerations, or other desireds. These commands enter the part of our software that we call the &quot;Controller Core&quot;. The bock diagram below shows an overview of this. Here, all commands get transformed into a cost function for the QP. From this point they are called motion objectives and momentum objectives. In addition, we try to minimize joint accelerations and the forces the robot exerts on its environment.</p>
<p>The QP will output the joint accelerations necessary to optimally (minimizing the sum of weighted objective costs) achieve all given goals. The result will also contain wrenches the robot exerts on the environment. Using this result and inverse dynamics we obtain desired joint torques. In a perfect world (with fully force controlable robots and perfect tracking) this would be sufficient. However, since some joints of the robot might not be force controlable or have bad force tracking, we also obtain desired joint velocities and positions by integration. In the case of Atlas, we use position control for the arms and a mix of joint torque and velocity control for other parts of the robot.</p>
<p><a name="controllercore"></a><img src="/img/documentation/ihmcController/controller_core_overview.png" alt="Controller Core"></p>
<p>For a more detailed description of the framework refer to T. Koolen et al. &quot;Design of a momentum-based control framework and application to the humanoid robot Atlas&quot; <em>International Journal of Humanoid Robotics</em> available <a href="https://www.researchgate.net/publication/280839675_Design_of_a_Momentum-Based_Control_Framework_and_Application_to_the_Humanoid_Robot_Atlas">here from researchgate</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/ihmc-open-robotics-software/docs/00-intro-control.html">← Introduction</a><a class="docs-next button" href="/ihmc-open-robotics-software/docs/02-yovariables.html">Yo Variables →</a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/ihmc-open-robotics-software/" class="nav-home"><img src="/ihmc-open-robotics-software/img/running-man-logo.png" alt="IHMC Open Robotics Software" width="66" height="58"/></a><div><h5>Docs</h5><a href="https://ihmcrobotics.github.io/ihmc-open-robotics-software/docs/quickstarthome.html">Quick Start</a><a href="https://ihmcrobotics.github.io/docs/docshome.html">Software Documentation</a></div><div><h5>Community</h5><a href="https://github.com/ihmcrobotics">GitHub</a><a href="https://www.facebook.com/TheIHMC" target="_blank" rel="noreferrer noopener">Facebook</a><a href="https://twitter.com/ihmcrobotics" target="_blank" rel="noreferrer noopener">Twitter</a><a href="https://www.youtube.com/user/DRCihmcRobotics" target="_blank" rel="noreferrer noopener">YouTube</a></div></section><section class="copyright">Copyright © 2018 IHMC Robotics </section></footer></div></body></html>